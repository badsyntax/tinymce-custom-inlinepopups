/*! tinymce-jqueryui-inline-popups - v0.1.0 - 2012-08-21
* https://github.com/badsyntax/tinymce-custom-inlinepopups
* Copyright (c) 2012 Richard Willis; Licensed MIT */
(function(){var a=tinymce.DOM,b=tinymce.dom.Event,c=tinymce.each;tinymce.create("tinymce.plugins.jQueryInlinePopups",{init:function(a,b){a.onBeforeRenderUI.add(function(){a.windowManager=new tinymce.InlineWindowManager(a)})},getInfo:function(){return{longname:"jQuery UI Inline Popups",author:"Richard Willis",authorurl:"http://badsyntax.co",infourl:"http://is.gd/j1FuI",version:"0.1b"}}}),tinymce.create("tinymce.InlineWindowManager:tinymce.WindowManager",{InlineWindowManager:function(a){this.parent(a),this.windows={}},open:function(b,c){b=b||{},c=c||{};if(!b.inline)return this.parent(b,c);var d=this,e=a.uniqueId(),f,g={title:b.title||"",width:"auto",height:"auto",modal:!0,resizable:!1,draggable:!0,dialogClass:"ui-dialog-tinymce",zIndex:3e5},h=$("<div />").attr("id","dialog-"+e).hide().appendTo("body"),i={id:e,features:b,element:h};return b.type||(this.bookmark=this.editor.selection.getBookmark(1)),b.content?(b.type==="confirm"?g.buttons=[{text:"Ok",click:function(a){b.button_func(!0)}},{text:"Cancel",click:function(a){b.button_func(!1)}}]:b.type==="alert"&&(g.buttons=[{text:"Ok",click:function(a){b.button_func(!0)}}]),h.html($("<div />",{"class":"ui-dialog-tinymce-content",html:b.content}))):f=$("<iframe />",{id:e+"_ifr",frameborder:0}).css({width:b.width,height:b.height+5}).attr("scrollbars","no").appendTo(h),c.mce_inline=!0,c.mce_window_id=e,c.mce_auto_focus=b.auto_focus,this.features=b,this.params=c,this.onOpen.dispatch(this,b,c),h.dialog(g).dialog("option","width",h.innerWidth()).dialog("option","position",h.dialog("option","position")),b.content||f.attr("src",b.url||b.file),d.windows[e]=i,i},resizeBy:function(a,b,c){return},focus:function(a){return},close:function(a,b){var c=this,d;b=b||a.frameElement.id.replace(/_ifr$/,"");if(!c.windows[b]){c.parent(a);return}if(d=c.windows[b])a&&a.frameElement&&(a.frameElement.src='javascript:""'),d.element.dialog("destroy").remove(),delete c.windows[b]},setTitle:function(a,b){var c=a.frameElement.id.replace(/_ifr$/,"");$("#ui-dialog-title-dialog-"+c).html(b)},alert:function(a,b,c){this._messagePopup("alert","Alert",a,b,c)},confirm:function(a,b,c){this._messagePopup("confirm","Confirm",a,b,c)},_messagePopup:function(b,c,d,e,f){var g=this,h;h=g.open({title:c,type:b,button_func:function(a){e&&e.call(a||g,a),g.close(null,h.id)},content:a.encode(g.editor.getLang(d,d)),inline:1,width:400,height:130})}}),tinymce.PluginManager.add("jqueryinlinepopups",tinymce.plugins.jQueryInlinePopups)})();